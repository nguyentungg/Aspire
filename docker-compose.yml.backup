version: "3.9"
services:
  caddy:
    image: caddy:2.3.0-alpine
    container_name: caddy
    ports:
      - 80:80
      - 443:443
    volumes:
      - ./.docker/caddy/Caddyfile:/etc/caddy/Caddyfile
      # - ./quasar:/home/quasar
      - ./vue:/home/vue
    depends_on:
      # - quasar
      - vue
#      - backend
    networks:
      - aspire

#  backend:
#    container_name: backend
#    build:
#      context: .
#      dockerfile: ./.docker/flask/Dockerfile
#    ports:
#      - 5000:5000
#    volumes:
#      - ./backend:/home/backend
#      - ./data:/home/backend/data
#    working_dir: /home/backend
#    entrypoint: bash -c 'python ./app.py'
#    networks:
#      - aspire
#    env_file:
#      - ./.env

  # quasar:
  #   container_name: quasar
  #   build: 
  #     context: .
  #     dockerfile: ./.docker/quasar/Dockerfile
  #   volumes:
  #     - ./quasar:/home/quasar
  #   ports:
  #     - 8082:8080
  #     - 5555:5555
  #   working_dir: /home/quasar
  #   entrypoint: bash -c 'quasar dev'
  #   networks:
  #     - aspire

  vue:
    container_name: vue
    build: 
      context: .
      dockerfile: ./.docker/vue/Dockerfile
    volumes:
      - ./vue:/home/vue
    ports:
      - 8080:8080
    working_dir: /home/vue
    entrypoint: bash -c 'yarn serve'
    networks:
      - aspire

networks:
  aspire:
    name: aspire
    driver: bridge
